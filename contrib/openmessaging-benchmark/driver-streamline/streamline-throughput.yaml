# Streamline Throughput-Optimized Driver Configuration
#
# Tuned for maximum messages/second. Trades latency for throughput.
# Use with throughput-focused workloads.
#
# Usage:
#   bin/benchmark --drivers driver-streamline/streamline-throughput.yaml \
#                 --workloads workloads/streamline-throughput.yaml

name: Streamline (Throughput)
driverClass: io.openmessaging.benchmark.driver.streamline.StreamlineBenchmarkDriver

bootstrapServers: localhost:9092
replicationFactor: 1
topicPartitions: 0

commonConfig: |
  request.timeout.ms=60000
  retry.backoff.ms=50

# Producer: maximize batching and throughput
producerConfig: |
  # Large batches for throughput
  batch.size=131072
  linger.ms=10

  # Don't wait for acks (fire and forget for max speed)
  acks=1

  # Compression - LZ4 best speed/ratio
  compression.type=lz4

  # Large buffer for sustained throughput
  buffer.memory=134217728

  # More in-flight requests
  max.in.flight.requests.per.connection=10

  # Faster retries
  retries=3
  retry.backoff.ms=50

# Consumer: large fetches, less frequent commits
consumerConfig: |
  # Large fetches
  fetch.min.bytes=65536
  fetch.max.wait.ms=500
  max.partition.fetch.bytes=10485760

  # Faster polling
  max.poll.records=1000

  auto.offset.reset=earliest
  enable.auto.commit=false
  session.timeout.ms=30000
